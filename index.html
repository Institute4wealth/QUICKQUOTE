<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Life Insurance Quote</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #f0f2f5;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    margin: 0;
  }
  .form-container {
    background: #fff;
    padding: 30px;
    border-radius: 12px;
    box-shadow: 0 6px 20px rgba(0,0,0,0.1);
    width: 100%;
    max-width: 400px;
  }
  h2 { text-align: center; margin-bottom: 20px; color: #333; }
  label { display: block; margin-bottom: 6px; font-weight: bold; color: #444; }
  input, select { width: 100%; padding: 10px; margin-bottom: 18px; border: 1px solid #ccc; border-radius: 6px; font-size: 15px; }
  button { width: 100%; padding: 12px; background: #0073e6; color: #fff; border: none; border-radius: 6px; font-size: 16px; cursor: pointer; transition: background 0.3s ease; }
  button:hover { background: #005bb5; }

  /* Inline radio buttons */
  .contact-method {
    display: flex;
    gap: 20px;
    margin-bottom: 18px;
  }
  .contact-method label {
    display: flex;
    align-items: center;
    gap: 6px;
    font-weight: normal;
  }

  .message {
    position: relative;
    opacity: 0;
    max-height: 0;
    overflow: hidden;
    text-align: center;
    font-weight: bold;
    margin-top: 20px;
    padding: 10px 20px;
    border-radius: 6px;
    transition: opacity 0.6s ease, max-height 0.6s ease;
  }
  .message.show { opacity: 1; max-height: 100px; }
  .success-message { color: green; background: #e6f9e6; }
  .error-message { color: red; background: #fde6e6; }
  .close-btn { position: absolute; top: 5px; right: 10px; font-weight: bold; cursor: pointer; background: transparent; border: none; font-size: 16px; color: inherit; }
</style>
</head>
<body>
<div class="form-container">
  <h2> Quick Quote </h2>
  <form id="insurance-form" action="https://formspree.io/f/xgvnwjby" method="POST">
    <label for="first_name">First Name</label>
    <input type="text" id="first_name" name="first_name" required>

    <label for="age">Age</label>
    <input type="number" id="age" name="age" min="18" max="100" required>

    <label for="gender">Gender (optional)</label>
    <select id="gender" name="gender">
      <option value="">-- Select --</option>
      <option value="He/Him">He/Him</option>
      <option value="She/Her">She/Her</option>
      <option value="They/Them">They/Them</option>
    </select>

    <label for="smoker">Do you smoke?</label>
    <select id="smoker" name="smoker" required>
      <option value="">-- Select --</option>
      <option value="Yes">Yes</option>
      <option value="No">No</option>
    </select>

    <label for="coverage">Coverage Requested</label>
    <select id="coverage" name="coverage" required>
      <option value="">-- Select --</option>
      <option value="$100,000">$100,000</option>
      <option value="$250,000">$250,000</option>
      <option value="$500,000">$500,000</option>
      <option value="$1,000,000">$1,000,000</option>
    </select>

    <!-- Inline radio buttons for contact method -->
    <label>Preferred Contact Method:</label>
    <div class="contact-method">
      <label><input type="radio" name="contact_method" value="email" required> Email</label>
      <label><input type="radio" name="contact_method" value="phone"> Phone</label>
    </div>

    <input type="email" id="email" name="email" placeholder="your@email.com" style="display:none;">
    <input type="tel" id="phone" name="phone" placeholder="(123)456-7890" style="display:none;">

    <button type="submit">Get Quote</button>
  </form>

  <div class="message success-message" id="success-message">
    üéâ Thank you! Your request has been submitted.
    <button class="close-btn" onclick="closeMessage('success-message')">√ó</button>
  </div>
  <div class="message error-message" id="error-message">
    ‚ùå Oops! Something went wrong. Please try again.
    <button class="close-btn" onclick="closeMessage('error-message')">√ó</button>
  </div>
</div>

<script>
const form = document.getElementById('insurance-form');
const successMessage = document.getElementById('success-message');
const errorMessage = document.getElementById('error-message');
const emailInput = document.getElementById('email');
const phoneInput = document.getElementById('phone');

// Show correct input based on radio selection
document.querySelectorAll('input[name="contact_method"]').forEach(radio => {
  radio.addEventListener('change', () => {
    if(radio.value === 'email') {
      emailInput.style.display = 'block';
      phoneInput.style.display = 'none';
      phoneInput.value = '';
    } else {
      phoneInput.style.display = 'block';
      emailInput.style.display = 'none';
      emailInput.value = '';
    }
  });
});

// Auto-format phone as (123)456-7890 while typing
phoneInput.addEventListener('input', e => {
  let x = e.target.value.replace(/\D/g,'').substring(0,10); // digits only
  let formatted = '';
  if(x.length > 0) formatted = '(' + x.substring(0,3);
  if(x.length >= 4) formatted += ')' + x.substring(3,6);
  if(x.length >= 7) formatted += '-' + x.substring(6,10);
  e.target.value = formatted;
});

// Show/hide messages
function showMessage(messageElement) {
  messageElement.classList.add('show');
  setTimeout(() => { messageElement.classList.remove('show'); }, 5000);
}
function closeMessage(id) {
  document.getElementById(id).classList.remove('show');
}

// Form submission with validation
form.addEventListener('submit', async function(e) {
  e.preventDefault();
  const contactMethod = document.querySelector('input[name="contact_method"]:checked').value;

  if(contactMethod === 'email' && !emailInput.value) {
    alert('Please enter a valid email.');
    return;
  }
  if(contactMethod === 'phone' && !phoneInput.value.match(/\(\d{3}\)\d{3}-\d{4}/)) {
    alert('Please enter a valid phone number in the format (123)456-7890.');
    return;
  }

  const formData = new FormData(form);
  try {
    const response = await fetch(form.action, {
      method: form.method,
      body: formData,
      headers: { 'Accept': 'application/json' }
    });
    if (response.ok) {
      showMessage(successMessage);
      errorMessage.classList.remove('show');
      form.reset();
      emailInput.style.display = 'none';
      phoneInput.style.display = 'none';
    } else {
      showMessage(errorMessage);
      successMessage.classList.remove('show');
    }
  } catch (error) {
    showMessage(errorMessage);
    successMessage.classList.remove('show');
  }
});
</script>
</body>
</html>
